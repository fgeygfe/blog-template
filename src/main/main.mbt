///| æ¶ˆæ¯ç±»å‹
enum Msg {
  ToHome
  ToPost1
  ToPost2
}

///| çŠ¶æ€ç±»å‹
struct Model {
  page : Int // 0:é¦–é¡µ, 1:è¯¦æƒ…1, 2:è¯¦æƒ…2
}

///| æ›´æ–°å‡½æ•°
fn update(msg : Msg, model : Model) -> (Cmd[Msg], Model) {
  match msg {
    ToHome => (none(), { page: 0 })
    ToPost1 => (none(), { page: 1 })
    ToPost2 => (none(), { page: 2 })
  }
}

///| é¦–é¡µè§†å›¾
fn view_home() -> Html[Msg] {
  div(
    class="min-h-screen bg-gradient-to-br from-pink-200 via-pink-100 to-white flex flex-col items-center justify-between",
    [
      // é¡¶éƒ¨å¯¼èˆª
      div(
        class="w-full py-6 bg-gradient-to-r from-pink-400 to-pink-200 shadow-lg",
        [
          h1(
            class="text-5xl font-extrabold text-white text-center drop-shadow mb-2",
            [text("ğŸŒ¸ MoonBit åšå®¢")],
          ),
          p(class="text-lg text-pink-50 text-center", [
            text("æ¬¢è¿æ¥åˆ°æ›´ç¾è§‚çš„åšå®¢é¦–é¡µï¼"),
          ]),
        ],
      ),
      // åšå®¢åˆ—è¡¨
      div(class="w-full max-w-2xl px-4 py-8 space-y-8", [
        div(
          class="bg-white rounded-2xl shadow-xl p-8 flex items-center gap-6 hover:scale-105 transition-all duration-300 border-b-2 border-pink-100",
          [
            div(class="text-4xl", [text("ğŸ‘©â€ğŸ’»")]),
            div(class="flex-1", [
              h1(class="text-2xl font-bold mb-2 text-pink-700", [
                text("MoonBit åšå®¢ç³»ç»Ÿå¼€å‘åˆæ¢"),
              ]),
              p(class="text-xs text-gray-400 mb-2", [
                text("ä½œè€…ï¼šZhuanz2 Â· 2025-08-20"),
              ]),
              p(class="text-base text-gray-600 mb-4 line-clamp-2", [
                text("è¿™æ˜¯ç¬¬ä¸€ç¯‡åšå®¢å†…å®¹ï¼Œæ”¯æŒ Markdown æ ¼å¼ã€‚"),
              ]),
              button(
                click=ToPost1,
                class="inline-flex items-center gap-2 px-4 py-2 bg-pink-500 text-white rounded-full shadow hover:bg-pink-600 active:scale-95 transition",
                [text("é˜…è¯»è¯¦æƒ…"), text("â†’")],
              ),
            ]),
          ],
        ),
        div(
          class="bg-white rounded-2xl shadow-xl p-8 flex items-center gap-6 hover:scale-105 transition-all duration-300 border-b-2 border-pink-100",
          [
            div(class="text-4xl", [text("ğŸ¦„")]),
            div(class="flex-1", [
              h1(class="text-2xl font-bold mb-2 text-pink-700", [
                text("Rabbit-tea æ¡†æ¶ä»‹ç»"),
              ]),
              p(class="text-xs text-gray-400 mb-2", [
                text("ä½œè€…ï¼šYoorkin Â· 2025-08-21"),
              ]),
              p(class="text-base text-gray-600 mb-4 line-clamp-2", [
                text(
                  "Rabbit-tea æ˜¯ MoonBit çš„å‰ç«¯æ¡†æ¶ï¼Œé€‚åˆå¤šé¡µåº”ç”¨å¼€å‘ã€‚",
                ),
              ]),
              button(
                click=ToPost2,
                class="inline-flex items-center gap-2 px-4 py-2 bg-pink-500 text-white rounded-full shadow hover:bg-pink-600 active:scale-95 transition",
                [text("é˜…è¯»è¯¦æƒ…"), text("â†’")],
              ),
            ]),
          ],
        ),
      ]),
      // åº•éƒ¨ç‰ˆæƒ
      div(
        class="w-full py-4 text-center text-xs text-pink-600 bg-pink-50 border-t border-pink-200 mt-8",
        [
          text(
            "Â© 2025 MoonBit åšå®¢ Demo Â· Powered by rabbit-tea & Tailwind CSS",
          ),
        ],
      ),
    ],
  )
}

///| è¯¦æƒ…é¡µ1è§†å›¾
fn view_post1() -> Html[Msg] {
  div(class="min-h-screen bg-gradient-to-br from-pink-200 via-pink-100 to-white flex flex-col items-center", [
    div(class="w-full max-w-2xl bg-white rounded-2xl shadow-xl p-10 mt-10", [
      div(class="flex items-center gap-4 mb-6", [
        div(class="text-3xl", [text("ğŸ‘©â€ğŸ’»")]),
        h1(class="text-3xl font-bold text-pink-700", [text("MoonBit åšå®¢ç³»ç»Ÿå¼€å‘åˆæ¢")]),
      ]),
      p(class="text-xs text-gray-400 mb-2", [text("ä½œè€…ï¼šZhuanz2 Â· 2025-08-20")]),
      div(class="border-b border-pink-100 mb-6", [text("")]),
      div(class="prose prose-pink max-w-none text-gray-700 mb-8", [text("è¿™é‡Œæ˜¯åšå®¢æ­£æ–‡å†…å®¹ã€‚")]),
      button(click=ToHome, class="inline-flex items-center gap-2 px-4 py-2 bg-pink-500 text-white rounded-full shadow hover:bg-pink-600 active:scale-95 transition", [text("è¿”å›é¦–é¡µ"), text("ğŸ ")]),
    ]),
    div(class="w-full py-4 text-center text-xs text-pink-600 bg-pink-50 border-t border-pink-200 mt-8", [
      text("Â© 2025 MoonBit åšå®¢ Demo Â· Powered by rabbit-tea & Tailwind CSS")
    ]),
  ])
}

///| è¯¦æƒ…é¡µ2è§†å›¾
fn view_post2() -> Html[Msg] {
  div(class="min-h-screen bg-gradient-to-br from-pink-200 via-pink-100 to-white flex flex-col items-center", [
    div(class="w-full max-w-2xl bg-white rounded-2xl shadow-xl p-10 mt-10", [
      div(class="flex items-center gap-4 mb-6", [
        div(class="text-3xl", [text("ğŸ¦„")]),
        h1(class="text-3xl font-bold text-pink-700", [text("Rabbit-tea æ¡†æ¶ä»‹ç»")]),
      ]),
      p(class="text-xs text-gray-400 mb-2", [text("ä½œè€…ï¼šYoorkin Â· 2025-08-21")]),
      div(class="border-b border-pink-100 mb-6", [text("")]),
      div(class="prose prose-pink max-w-none text-gray-700 mb-8", [text("è¿™é‡Œæ˜¯ Rabbit-tea ä»‹ç»æ­£æ–‡å†…å®¹ã€‚")]),
      button(click=ToHome, class="inline-flex items-center gap-2 px-4 py-2 bg-pink-500 text-white rounded-full shadow hover:bg-pink-600 active:scale-95 transition", [text("è¿”å›é¦–é¡µ"), text("ğŸ ")]),
    ]),
    div(class="w-full py-4 text-center text-xs text-pink-600 bg-pink-50 border-t border-pink-200 mt-8", [
      text("Â© 2025 MoonBit åšå®¢ Demo Â· Powered by rabbit-tea & Tailwind CSS")
    ]),
  ])
}

///| æ€»è§†å›¾
fn view(model : Model) -> Html[Msg] {
  match model.page {
    0 => view_home()
    1 => view_post1()
    2 => view_post2()
    _ => div([text("é¡µé¢ä¸å­˜åœ¨")])
  }
}


// ç›´æ¥ç”¨ viewï¼Œæ— éœ€ safe_view

fn main {
  let model = { page: 0 }
  @tea.startup(model=model, update=update, view=view)
}


